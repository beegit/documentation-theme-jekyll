<!DOCTYPE html>
<html lang="en">
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link href='//fonts.googleapis.com/css?family=Montserrat:700,400' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic' rel='stylesheet' type='text/css'> -->
     <link rel="stylesheet" href="/jekyll-doc/stylesheets/syntax.css"  type='text/css'>
     <link rel="stylesheet" href="/jekyll-doc/stylesheets/font-awesome.min.css">
     <link rel="stylesheet" href="/jekyll-doc/stylesheets/bootstrap.min.css">
     <link rel="stylesheet" href="/jekyll-doc/stylesheets/modern-business.css">
    <link rel="stylesheet" href="/jekyll-doc/stylesheets/lavish-bootstrap.css"  type='text/css'>
    <link rel="canonical" href="http://tomjohnson1492.github.io/jekyll-doc/creating_toc/">
    <link rel="stylesheet" href="/jekyll-doc/stylesheets/customstyles.css"  type='text/css'>
    <link rel="canonical" href="http://tomjohnson1492.github.io/jekyll-doc/creating_toc/">
  <link rel="alternate" type="application/rss+xml" title="Jekyll-doc" href="http://tomjohnson1492.github.io/jekyll-doc/feed.xml" />
    <script src="/jekyll-doc/js/jquery.min.js"></script>
    <script src="/jekyll-doc/js/jquery.cookie.min.js"></script>
    <script src="/jekyll-doc/js/jquery.navgoco.min.js"></script>
    <script src="/jekyll-doc/js/bootstrap.min.js"></script>
    <script src="/jekyll-doc/js/toc.js"></script>
    <script src=""></script>
       <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <title>Creating a table of contents | Jekyll-doc</title>
     <meta name="description" content="A theme based on Jekyll designed for technical writers creating help systems. Feel free to clone, fork, and otherwise use. It's all open source and free to implement.  Please consider contributing back any innovations you make so that others can benefit.
">
 
  </head>

<body>


    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                 <a class="fa fa-home fa-lg navbar-brand" href="/jekyll-doc/">&nbsp; Jekyll-doc</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

<!-- entries without drop-downs appear here -->
  
  

      
    
      <li><a href="/jekyll-doc/about/">About</a></li>
    
          
    

      
    
      <li><a href="/jekyll-doc/contact/">Contact</a></li>
    
          
    

      
    
      <li><a href="/jekyll-doc/supported_features/">Supported features</a></li>
    
          
    


<!-- entries with drop-downs appear here -->

  
  
    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting started<b class="caret"></b></a>
         <ul class="dropdown-menu">
         
         
         
       <li><a href="/jekyll-doc/hello_world_tutorial/">Hello World tutorial</a></li>
       
    
         
         
       <li><a href="/jekyll-doc/sample/">Sample</a></li>
       
    
    </ul>
    </li>
  
 
<li>
 <!-- start search -->
   <div id="search-demo-container">
      <input type="text" id="search-input" placeholder="search...">
      <ul id="results-container"></ul>
    </div>

    
    <script src="/jekyll-doc/js/jekyll-search.js" type="text/javascript"></script>
    
    
    <script type="text/javascript">
      SimpleJekyllSearch.init({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        dataSource: '/jekyll-doc/search.json',        
        searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: 'No results found',
        limit: 10,
        fuzzy: true,
      })
    </script>
    <!-- end search -->
 </li>


<!-- you can also just hard-code a section here, for example if you want to include external resources:
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portfolio <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="portfolio-1-col.html">1 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-2-col.html">2 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-3-col.html">3 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-4-col.html">4 Column Portfolio</a>
                            </li>
                            <li>
                                <a href="portfolio-item.html">Single Portfolio Item</a>
                            </li>
                        </ul>
                    </li>



                    </li>
                </ul>

            </div>
            <!-- /.navbar-collapse -->
        </div>

        <!-- /.container -->
    </nav>


    <!-- Page Content -->
    <div class="container">
    <div class="col-lg-12">&nbsp;</div>

        <!-- Page Heading/Breadcrumbs -- site not hierarchical enough to support this feature well enough.
        <div class="row">
            <div class="col-lg-12">
               <h1 class="page-header">Creating a table of contents
                    <small></small>
                </h1> 
                &nbsp;
                <ol class="breadcrumb">
                    <li><a href="/jekyll-doc/">Home</a> Home</li>
                    
                    <li></li>
                    <li Creating a table of contents</li>
                    
                </ol>
            </div>
        </div>
        -->




 <!-- Content Row -->
        <div class="row">
            <!-- Sidebar Column -->
            <div class="col-md-3">

<script>
$(document).ready(function() {
    // Initialize navgoco with default options
    $("#mysidebar").navgoco({
        caretHtml: '',
        accordion: true,
        openClass: 'active', // open
        save: true,
        cookie: {
            name: 'navgoco',
            expires: false,
            path: '/'
        },
        slide: {
            duration: 400,
            easing: 'swing'
        }
    });

    $("#collapseAll").click(function(e) {
        e.preventDefault();
        $("#mysidebar").navgoco('toggle', false);
    });

    $("#expandAll").click(function(e) {
        e.preventDefault();
        $("#mysidebar").navgoco('toggle', true);
    });
});

</script>
  
<!-- note that the data file for your project needs to be specified in the code below. Instead of site.data.jekyll, use the data file corresponding to your project (create one if it doesn't already exist). -->

<ul id="mysidebar" class="nav">


  
  
    <li><a href="#">Creating content</a>
    <ul>
    
      
      <li><a href="/jekyll-doc/writing_content/">Writing content</a></li>
    
    
      
      <li class="active"><a href="/jekyll-doc/creating_toc/" class="active">Creating a table of contents</a></li>
    
    
      
      <li><a href="/jekyll-doc/creating_topnav/">Creating the top navigation bar</a></li>
    
    
      
      <li><a href="/jekyll-doc/collections/">Collections</a></li>
    
    
      
      <li><a href="/jekyll-doc/cshelp/">Context-sensitive help</a></li>
    
    
    </ul>
    </li>
  
    <li><a href="#">Formatting content</a>
    <ul>
    
      
      <li><a href="/jekyll-doc/icons/">Icons</a></li>
    
    
      
      <li><a href="/jekyll-doctables">Tables</a></li>
    
    
      
      <li><a href="/jekyll-doc/markdown_readability/">Markdown readability</a></li>
    
    
      
      <li><a href="/jekyll-doc/links/">Links</a></li>
    
    
      
      <li><a href="/jekyll-doc/syntax_highlighting/">Syntax highlighting</a></li>
    
    
      
      <li><a href="/jekyll-doc/images/">Images</a></li>
    
    
      
      <li><a href="/jekyll-doc/labels/">Labels</a></li>
    
    
    </ul>
    </li>
  
    <li><a href="#">Publishing</a>
    <ul>
    
      
      <li><a href="/jekyll-doc/collections/">Collections</a></li>
    
    
      
      <li><a href="/jekyll-doc/conditional_logic">Conditional logic</a></li>
    
    
      
      <li><a href="/jekyll-doc/cshelp/">Context-sensitive help</a></li>
    
    
      
      <li><a href="/jekyll-doc/tags/">Tags</a></li>
    
    
      
      <li><a href="/jekyll-doc/snippets/">Snippets</a></li>
    
    
      
      <li><a href="/jekyll-doc/lavish/">Lavish</a></li>
    
    
      
      <li><a href="/jekyll-doc/page_level_variables/">Page level variables</a></li>
    
    
      
      <li><a href="/jekyll-doc/build_arguments/">Build arguments</a></li>
    
    
      
      <li><a href="/jekyll-doc/building_jekyll_themes/">Building Jekyll themes</a></li>
    
    
    </ul>
    </li>
  
    <li><a href="#">Blog posts</a>
    <ul>
    
      
      <li><a href="/jekyll-doc">Writing blog posts</a></li>
    
    
      
      <li><a href="/jekyll-doc/blog/"></a></li>
    
    
    </ul>
    </li>
  
    <li><a href="#">Special effects</a>
    <ul>
    
      
      <li><a href="/jekyll-doc/shuffle/">Shuffle</a></li>
    
    
      
      <li><a href="/jekyll-doc/scroll/">Scroll</a></li>
    
    
      
      <li><a href="/jekyll-doc/search/">Search</a></li>
    
    
      
      <li><a href="/jekyll-doc/gemfiles/">gemfiles</a></li>
    
    
      
      <li><a href="/jekyll-doc/creating_print_output/">Creating print output</a></li>
    
    
    </ul>
    </li>
  
    <li><a href="#">How to publish</a>
    <ul>
    
      
      <li><a href="/jekyll-doc/github_repo/">Github repo</a></li>
    
    
      
      <li><a href="/jekyll-doc/fork_this_template/">Fork this template</a></li>
    
    
      
      <li><a href="/jekyll-doc/dummytext/">Dummy text</a></li>
    
    
    </ul>
    </li>
  



        </div> <!-- end sidebar column -->




            <!-- Content Column -->
            <div class="col-md-9">

                <div class="post-header">
  <h1 class="post-title-main">Creating a table of contents</h1>
</div>
<div class="post-content">


<div class="post-summary"></div>


<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });


$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

<p>The table of contents (TOC) on the left reads data from the navigation/nav.yml file and displays it on the site. With this setup, the formatting is separate from the display. This allows for the same theme to be used to publish multiple sites. Each project has its own yml file. The configuration file defines the location of the yml file that the sidebar reads. This setup is probably the most ingenious thing about this whole theme (the setup is not particular to this theme.)</p>

<h2 id="repurposing-the-theme">Repurposing the theme</h2>

<p>When you have a website that functions as a help system, you get trapped into the problem of separating navigation links from the layout files so that the same layout can be used for different projects. If you were to directly include the links in the sidebar and other theme files, you would have to swap out a different sidebar entirely for each new project.</p>

<p>With this approach, each project has its own data files. The configuration file can define the source of the data files with this option: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">data_source: navigation/jekyll-doc
</code></pre></div>
<p>This theme depends on some assumptions. First is that each configuration file defines a data source location where it will access the TOC navigation and other options. The second is that the data files be named nav.yml and options.yml. </p>

<h2 id="the-two-data-files">The two data files</h2>

<p>The nav.yml contains the links for the sidebar and top navigation. options.yml contains other theme options, such as the code for Disqus (a commenting feature), Google Analytics, and more. </p>

<h2 id="yml-structure">YML structure</h2>

<p>The nav.yml file is structured using YML syntax. This is a human-readable format that depends on tab spacing to define different levels for the content. </p>

<p>When you add your TOC items to the sidebar, pay special attention to the format of the jekyll-doc nav.yml file and simply replicate it. Here&#39;s a sample of the sidebar code:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">entries:
- title: Sidebar
  subcategories:
    - title: Getting started
      items:
        - title: Alerts
          url: /alerts/
        - title: Build arguments
          url: /build_arguments/
    - title: Publishing
</code></pre></div>
<p>This first section is Getting Started, and it has two pages inside it: Alerts and Build arguments. Each item has a title and URL. </p>

<p>The sidebar code will iterate through each grouping of items and pull out the title and URL and put them inside formatting for the theme. If the page URl matches the current page, then an <code>active</code> class gets applied.</p>
<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>entry<span class="w"> </span>in<span class="w"> </span>site.data.nav.entries<span class="w"> </span><span class="p">%}</span>

  <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>subcategory<span class="w"> </span>in<span class="w"> </span>entry.subcategories<span class="w"> </span><span class="p">%}</span>
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">subcategory</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>&lt;/a&gt;
    &lt;ul&gt;
    <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>subcategory.items<span class="w"> </span><span class="p">%}</span>
      <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="nv">item</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">%}</span>
      &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;<span class="p">{{</span><span class="nv">item</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">prepend</span><span class="p">:</span><span class="w"> </span>site.baseurl<span class="p">}}</span><span class="nf">&quot;</span><span class="w"> </span><span class="na">class</span><span class="o">=</span><span class="s2">&quot;active&quot;</span>&gt;{{item.title<span class="p">}}</span><span class="nf">&lt;/a&gt;&lt;/li&gt;</span><span class="w"></span>
<span class="w">    </span>{%<span class="w"> </span>else<span class="w"> </span>%}
      &lt;li&gt;&lt;a href=&quot;<span class="p">{{</span><span class="nv">item</span><span class="p">.</span><span class="nv">url</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">prepend</span><span class="p">:</span><span class="w"> </span>site.baseurl<span class="p">}}</span><span class="nf">&quot;&gt;{{item.title}}&lt;/a&gt;&lt;/li&gt;</span><span class="w"></span>
<span class="w">    </span>{%<span class="w"> </span>endif<span class="w"> </span>%}
    <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
    &lt;/ul&gt;
    &lt;/li&gt;
  <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div>
<p>It&#39;s important for the data references in the theme to match up with the location of the data files for the project. You can&#39;t simply change <code>site.data.nav</code> to <code>site.data.mynav</code> without breaking the theme. In this case, <code>site.data.nav</code> refers to the location of the yml file. <code>site</code> is the global namespace, <code>data</code> is the data folder as defined in the configuration file, and <code>nav</code> is the filename inside the <code>data</code> folder&#39;s location.</p>

<p>The YML files must be named nav.yml and options.yml for each of your projects, but the folder these files are in varies by project. The folder location where data is stored is defined in the configuration file. </p>

<h2 id="navgoco">Navgoco</h2>

<p>There&#39;s a lot to getting a functional TOC. I used a jQuery plugin called <a href="http://apps.komposta.net/jquery/navgoco/demo/">Navgoco</a> for this. Navgoco uses cookies to remember the last page the user was on (so that when the page refreshes, the TOC doesn&#39;t return to the default state). Additionally, navgoco also incorporates the jQuery accordion feature so that expanding one section collapses the others (and hence saves visual space).</p>

<h2 id="accordion">Accordion</h2>

<p>If you want to disable the accordion feature, in the options.yml file, change <code>true</code> to <code>false</code>. Without the accordion effect, each section can expand without any auto-collapsing of other sections. If you disable the accordion, a section at the bottom of the TOC will appear that says Expand All or Collapse All.</p>

</div>





    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'idrbwjekyll'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    



            </div>
        </div>
        <!-- /.row -->

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                     

Site last generated: Feb 17, 2015.
Built with <a href="http://jekyllrb.com/">Jekyll</a> using the <a href="http://tomjohnson1492.github.io/jekyll-doc/">Jekyll-doc theme</a>.



                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->



 
</body>

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-408430-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>

